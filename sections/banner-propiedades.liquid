{% comment %}
  Sección: Hero con barra de búsqueda de propiedades
{% endcomment %}

<section class="hero-search-wrapper-{{ section.id }}">
  <div class="hero-search-bg">
    {% if section.settings.background_image != blank %}
      <img
        src="{{ section.settings.background_image | image_url: width: 2000 }}"
        alt="{{ section.settings.heading | escape }}">
    {% endif %}
    <div class="hero-search-overlay"></div>
  </div>

  <div class="hero-search-content">
    {% if section.settings.heading != blank %}
      <h1 class="hero-search-heading">
        {{ section.settings.heading }}
      </h1>
    {% endif %}

    {% if section.settings.subheading != blank %}
      <p class="hero-search-subheading">
        {{ section.settings.subheading }}
      </p>
    {% endif %}

    <form
      class="hero-search-form"
      action="{{ section.settings.form_action | default: '/search' }}"
      method="get"
    >
      <!-- Select Venta / Renta -->
      <select name="{{ section.settings.param_venta | default: 'venta' }}">
        <option value="">{{ section.settings.label_venta_default }}</option>
        {% if section.settings.option_venta_1_label != blank %}
          <option value="{{ section.settings.option_venta_1_value }}">{{ section.settings.option_venta_1_label }}</option>
        {% endif %}
        {% if section.settings.option_venta_2_label != blank %}
          <option value="{{ section.settings.option_venta_2_value }}">{{ section.settings.option_venta_2_label }}</option>
        {% endif %}
      </select>

      <!-- Select Tipo de inmueble -->
      <select name="{{ section.settings.param_tipo | default: 'tipo' }}">
        <option value="">{{ section.settings.label_tipo_default }}</option>
        {% if section.settings.option_tipo_1_label != blank %}
          <option value="{{ section.settings.option_tipo_1_value }}">{{ section.settings.option_tipo_1_label }}</option>
        {% endif %}
        {% if section.settings.option_tipo_2_label != blank %}
          <option value="{{ section.settings.option_tipo_2_value }}">{{ section.settings.option_tipo_2_label }}</option>
        {% endif %}
        {% if section.settings.option_tipo_3_label != blank %}
          <option value="{{ section.settings.option_tipo_3_value }}">{{ section.settings.option_tipo_3_label }}</option>
        {% endif %}
      </select>

      <!-- Campo texto -->
      <input
        type="search"
        name="{{ section.settings.param_busqueda | default: 'q' }}"
        placeholder="{{ section.settings.placeholder_busqueda }}"
      >

      <!-- Botón -->
      <button type="submit" class="hero-search-button">
        {{ section.settings.boton_texto }}
      </button>
    </form>
  </div>
</section>

<style>
  .hero-search-wrapper-{{ section.id }} {
    position: relative;
    overflow: hidden;
    min-height: {{ section.settings.altura_desktop }}vh;
    color: #ffffff;
  }

  .hero-search-bg {
    position: absolute;
    inset: 0;
    overflow: hidden;
  }

  .hero-search-bg img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .hero-search-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,{{ section.settings.overlay_intensity }});
  }

  .hero-search-content {
    position: relative;
    z-index: 2;
    max-width: 1000px;
    margin: 0 auto;
    padding: 80px 16px;
    text-align: center;
  }

  .hero-search-heading {
    margin: 0 0 10px;
    font-size: {{ section.settings.heading_size }}px;
    font-weight: 700;
  }

  .hero-search-subheading {
    margin: 0 0 20px;
    font-size: {{ section.settings.subheading_size }}px;
    opacity: 0.9;
  }

  .hero-search-form {
    display: grid;
    grid-template-columns: 1fr 1fr 2fr auto;
    gap: 0;
    background: rgba(255,255,255,0.95);
    border-radius: 999px;
    overflow: hidden;
    max-width: 900px;
    margin: 0 auto;
  }

  .hero-search-form select,
  .hero-search-form input {
    border: none;
    padding: 12px 14px;
    font-size: 14px;
    outline: none;
  }

  .hero-search-form select {
    border-right: 1px solid #e0e0e0;
    background: #ffffff;
  }

  .hero-search-form input {
    background: #ffffff;
  }

  .hero-search-button {
    border: none;
    padding: 0 24px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    background: {{ section.settings.button_color }};
    color: {{ section.settings.button_text_color }};
    white-space: nowrap;
  }

  .hero-search-button:hover {
    filter: brightness(0.9);
  }

  @media (max-width: 900px) {
    .hero-search-wrapper-{{ section.id }} {
      min-height: {{ section.settings.altura_mobile }}vh;
    }

    .hero-search-form {
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto auto;
      border-radius: 16px;
    }

    .hero-search-form input {
      grid-column: 1 / -1;
      border-top: 1px solid #e0e0e0;
    }

    .hero-search-button {
      grid-column: 1 / -1;
      margin-top: 4px;
      padding: 10px 0;
      border-radius: 0 0 16px 16px;
    }
  }

  @media (max-width: 600px) {
    .hero-search-heading {
      font-size: {{ section.settings.heading_size_mobile }}px;
    }
    .hero-search-subheading {
      font-size: {{ section.settings.subheading_size_mobile }}px;
    }
    .hero-search-content {
      padding: 60px 12px 40px;
    }

    .hero-search-form {
      grid-template-columns: 1fr;
    }

    .hero-search-form select,
    .hero-search-form input,
    .hero-search-button {
      border-radius: 0;
      border-bottom: 1px solid #e0e0e0;
    }

    .hero-search-button {
      border-bottom: none;
    }
  }
</style>

{% schema %}
{
  "name": "Hero búsqueda propiedades",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Imagen de fondo"
    },
    {
      "type": "range",
      "id": "altura_desktop",
      "label": "Altura en desktop (vh)",
      "min": 40,
      "max": 100,
      "step": 5,
      "default": 70
    },
    {
      "type": "range",
      "id": "altura_mobile",
      "label": "Altura en móvil (vh)",
      "min": 40,
      "max": 90,
      "step": 5,
      "default": 60
    },
    {
      "type": "range",
      "id": "overlay_intensity",
      "label": "Oscurecer imagen de fondo",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "default": 0.5
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Título",
      "default": "Busca tu propiedad ideal"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subtítulo",
      "default": "Encuentra casas, departamentos y terrenos en las mejores ubicaciones."
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "Tamaño título (px)",
      "min": 20,
      "max": 48,
      "step": 2,
      "default": 32
    },
    {
      "type": "range",
      "id": "subheading_size",
      "label": "Tamaño subtítulo (px)",
      "min": 12,
      "max": 22,
      "step": 1,
      "default": 16
    },
    {
      "type": "range",
      "id": "heading_size_mobile",
      "label": "Tamaño título móvil (px)",
      "min": 18,
      "max": 32,
      "step": 1,
      "default": 24
    },
    {
      "type": "range",
      "id": "subheading_size_mobile",
      "label": "Tamaño subtítulo móvil (px)",
      "min": 12,
      "max": 18,
      "step": 1,
      "default": 14
    },
    {
      "type": "header",
      "content": "Barra de búsqueda"
    },
    {
      "type": "text",
      "id": "form_action",
      "label": "URL de destino del formulario",
      "default": "/search"
    },
    {
      "type": "text",
      "id": "param_venta",
      "label": "Nombre del parámetro para 'Venta/Renta'",
      "default": "venta"
    },
    {
      "type": "text",
      "id": "label_venta_default",
      "label": "Texto por defecto del select Venta/Renta",
      "default": "Venta"
    },
    {
      "type": "text",
      "id": "option_venta_1_label",
      "label": "Opción 1 etiqueta (ej. Venta)",
      "default": "Venta"
    },
    {
      "type": "text",
      "id": "option_venta_1_value",
      "label": "Opción 1 valor",
      "default": "venta"
    },
    {
      "type": "text",
      "id": "option_venta_2_label",
      "label": "Opción 2 etiqueta (ej. Renta)",
      "default": "Renta"
    },
    {
      "type": "text",
      "id": "option_venta_2_value",
      "label": "Opción 2 valor",
      "default": "renta"
    },
    {
      "type": "text",
      "id": "param_tipo",
      "label": "Nombre del parámetro para 'Tipo de inmueble'",
      "default": "tipo"
    },
    {
      "type": "text",
      "id": "label_tipo_default",
      "label": "Texto por defecto del select Tipo",
      "default": "Tipo de inmueble"
    },
    {
      "type": "text",
      "id": "option_tipo_1_label",
      "label": "Tipo 1 etiqueta (ej. Casa)",
      "default": "Casa"
    },
    {
      "type": "text",
      "id": "option_tipo_1_value",
      "label": "Tipo 1 valor",
      "default": "casa"
    },
    {
      "type": "text",
      "id": "option_tipo_2_label",
      "label": "Tipo 2 etiqueta (ej. Departamento)",
      "default": "Departamento"
    },
    {
      "type": "text",
      "id": "option_tipo_2_value",
      "label": "Tipo 2 valor",
      "default": "departamento"
    },
    {
      "type": "text",
      "id": "option_tipo_3_label",
      "label": "Tipo 3 etiqueta (ej. Terreno)",
      "default": "Terreno"
    },
    {
      "type": "text",
      "id": "option_tipo_3_value",
      "label": "Tipo 3 valor",
      "default": "terreno"
    },
    {
      "type": "text",
      "id": "param_busqueda",
      "label": "Nombre del parámetro de búsqueda",
      "default": "q"
    },
    {
      "type": "text",
      "id": "placeholder_busqueda",
      "label": "Placeholder del campo de búsqueda",
      "default": "Buscar por ubicación, dirección o calle"
    },
    {
      "type": "text",
      "id": "boton_texto",
      "label": "Texto del botón",
      "default": "BUSCAR"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Color del botón",
      "default": "#3c7a4a"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Color del texto del botón",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "Hero búsqueda propiedades",
      "category": "Banners"
    }
  ]
}
{% endschema %}
